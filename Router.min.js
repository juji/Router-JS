var Router={routes:[],_notfound:function(){},mode:null,root:"/",init:function(a){this.pushstate="undefined"!=typeof history&&"undefined"!=typeof history.pushState;this.root="undefined"!=typeof a.root?"/"+this.clearSlashes(a.root)+"/":"/";this.hashbang="undefined"!=typeof a.hashbang?a.hashbang:!0;this.prepared="undefined"!=typeof a.prepared?a.prepared:!1;this.interval=!1;return this},getFragment:function(){var a="";this.pushstate?a=this.clearRoot(decodeURI("/"+this.clearSlashes(location.pathname)+
location.search)):this.hashbang&&(a=window.location.href.match(/#(.*)$/),a=(a?a[1]:"").replace(/\/\?/,"?"));return this.clearSlashes(a)},isInternal:function(a){return!a.match(/[^:]+:/)||a.match(new RegExp("^"+(window.location.protocol+"//"+window.location.host+this.root).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")))||a.match(/^\#/)&&this.hashbang?!0:!1},clearSlashes:function(a){return a.toString().replace(/\/+$/,"").replace(/^\/+/,"").replace(/\/+/,"/")},clearRoot:function(a){var b=new RegExp("^"+(window.location.protocol+
"//"+window.location.host+this.root).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"));return a.replace(new RegExp("^"+this.root.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")),"").replace(b,"")},queryObject:function(a){var b={};a.replace(RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,d,c,f){b[d]=f});return b},add:function(a,b){"function"==typeof a&&(b=a,a="");a=this.clearSlashes(a);var e=a.match(/(\:[^\/\=\&\?]+)/g)||!1;a="^"+a.replace(/(\:[^\/\=\&\?]+)/g,"<<asdf<<sd<<").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1").replace(/<<asdf<<sd<</g,
"([^?/=&]+)")+"$";this.routes.push({re:a,vars:e,handler:b});return this},notfound:function(a){this._notfound=a;return this},check:function(a){if(this.hashbang||this.pushstate){var b=a?this.clearRoot("/"+this.clearSlashes(a)+"/"):this.getFragment(),b=this.clearSlashes(b);a=b.replace(/\?(.*)$/,"");for(var e=this.queryObject(b),d=!1,c=0;c<this.routes.length;c++){var f=b.match(new RegExp(this.routes[c].re));f&&(f.shift(),d=[f,this.routes[c].vars,this.routes[c].handler])}if(d){b={};for(c=0;c<d[1].length;c++)b[d[1][c].replace(/\:/,
"")]=d[0][c];d[2].apply(b,[a,e])}else this._notfound(a,e);return this}},listen:function(){var a=this;if(a.pushstate)window.onpushstate=window.onpopstate=function(){a.check(a.getFragment())};else if("undefined"!=typeof window.onhashchange&&a.hashbang){var b=!1,e="hashchange";"undefined"!=typeof window.addEventListener?b=window.addEventListener:"undefined"!=typeof window.attachEvent&&(b=window.attachEvent,e="on"+e);b(e,function(){a.check(a.getFragment())},
!1)}else a.current=a.getFragment(),a.interval=setInterval(function(){a.current!=a.getFragment()&&(a.current=a.getFragment(),a.check(a.current))},50);if(!this.prepared){var d=window.location.hash;this.navigate(window.location.href);setTimeout(function(){d!=window.location.hash||a.pushstate||a.check(a.getFragment())},100)}},navigate:function(a){a=a?this.clearRoot(a.replace(/^#/,"").replace(/#(.*)$/,"$1")):"";this.pushstate?(history.pushState(null,null,this.root+a),window.onpushstate()):
window.location.href=window.location.protocol+"//"+window.location.host+this.root+"#"+a}};"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(exports=module.exports=Router);